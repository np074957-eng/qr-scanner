<!DOCTYPE html>
<html>
<head>
  <title>QR Scanner</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <link rel="stylesheet" href="style.css">
  
</head>

<body>
  
  
 <div class="container">
  

        <header>
            <div class="logo-container">
                <img src="logo.png" alt="Logo Sekolah" class="school-logo">
            </div>
            <h1>Presensi Berbasis QR Code</h1>
            <h2>SMK Negeri 2 Purwodadi</h2>
        </header>

        <main>
            <section id="scanner-area">
                <h3>Arahkan QR Code ke Kamera</h3>
                <div id="reader"></div> 
            </section>

            <section id="status-area">
                <p class="status-message">Pindai Code QR anda di atas!</p>
                <div id="scan-result" class="result-box"></div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 | Sistem Informasi Sekolah</p>
        </footer>
    </div>

</body>

 <script>
    const URL = "https://script.google.com/macros/s/AKfycbxocP6k2e8mz5ayczAJwIFk3CfVaW5mIq4kUQqK1zbnnHqBSnCedon5uOy4Z7vC_kM7FA/exec";

    let lastData = "";
    let cooldown = 5000; // 2 detik cooldown
    let lastTime = 0;



    function onScanSuccess(decodedText) {
        console.log("QR:", decodedText);

        // Kirim ke Google Sheet
        fetch(URL + "?kode=" + decodedText);

        // Bunyi beep
        const audio = new Audio("beep.mp3");
        audio.play();
    }

    const html5QrCode = new Html5Qrcode("reader");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess
    );
  </script>

</html>